---
created: 2025-10-15
id: TKT-0011
owner: openai-assistant
priority: P1
status: In-Progress
title: Harden identity SSR data contract
---

## Context

> Phase 1 of the identity tab SSR roadmap focuses on stabilising server data preparation, ensuring deterministic payloads, and covering the server → client hydration path with tests.

## Plan

- [x] Centralise identity SSR queries under a typed `queries` module with consistent fallbacks.
- [x] Align React Query keys and remove redundant `useEffect` hydration where props suffice.
- [x] Add integration coverage to confirm the page renders with prefetched data and no extra fetches.
- [x] Update identity developer docs to describe the refreshed data flow.

## Acceptance

- [x] Identity SSR helpers return typed results with shared error handling and caching hints.
- [x] Jest/Playwright suite validates SSR payload usage without redundant client requests.
- [x] Documentation changes reviewed with the identity squad.

## Links

- Primary PR: https://github.com/6529-Collections/6529seize-frontend/pull/1550
- Follow-ups: TKT-0012, TKT-0013

## Log

- 2025-10-15T00:05:00Z – Ticket created from Phase 1 roadmap scope.
- 2025-10-15T01:00:00Z – Implemented shared identity query helper, simplified hydrator caching, and added unit coverage plus README notes.
- 2025-10-15T02:45:00Z – Landed integration test covering SSR prepare hook and extended README testing guidance.
- 2025-10-15T03:20:00Z – Normalised helper error handling, exposed cache hints/tags, and expanded unit tests to assert the new contract.
- 2025-10-15T03:30:00Z – Documented Phase 1 snapshot for identity squad review and circulated follow-up questions.
- 2025-10-15T04:00:00Z – Identity squad review complete; approvals recorded in project docs with no follow-up actions required.
- 2025-10-16T09:15:00Z – Linked primary PR #1550 and mirrored the change on the Codex board.
