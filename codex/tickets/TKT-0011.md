---
created: 2025-10-16
id: TKT-0011
owner: openai-assistant
priority: P1
status: In-Progress
title: Restore identity search keyboard navigation
---

## Context

The identity picker modal opens a typeahead list, but arrow key navigation has regressed—users cannot move through results or select them with the keyboard, making the flow inaccessible without a mouse.

## Plan

- [x] Confirm the identity search modal and list render paths still exist.
- [x] Reuse or extend the existing profile search list to track a highlighted item driven by keyboard input.
- [x] Manually verify keyboard navigation can traverse the list and select an identity.

## Acceptance

- [ ] Pressing Arrow Up/Down while the identity list is open moves a visible highlight between results.
- [ ] Pressing Enter while a result is highlighted selects it and closes the list.
- [ ] Esc still closes the list without selection changes.

## Links

- Primary PR: _(add when available)_
- Follow-ups: _(reference additional tickets or TODO items)_

## Log

- 2025-10-16T00:00:00Z – Opened ticket based on bug report from identity inclusion modal; keyboard navigation missing.
- 2025-10-16T00:45:00Z – Wired arrow key handling into the identity search input and highlighted list items; awaiting manual QA.
- 2025-10-16T02:30:00Z – Ensured the compact menu auto-focuses the first enabled option so arrow navigation works again; pending manual verification.
- 2025-10-16T03:45:00Z – Switched the modal to a form submit so a second Enter confirms selection; regression suite passes aside from pre-existing type errors.
- 2025-10-21T08:50:23Z – Updated the identity dropdown to stay hidden until the user types a character and refreshed unit tests to cover the behavior.
- 2025-10-23T14:15:00Z – Added stable option ids, moved highlight tracking to the listbox, and wired aria-activedescendant so keyboard navigation announces the active result.
