---
created: 2025-10-15
id: TKT-0012
owner: openai-assistant
priority: P1
status: Backlog
title: Build server-first identity shells
---

## Context

> Phase 2 of the identity tab SSR roadmap aims to move read-mostly widgets (header, statements list, raters/activity shells) into server components that stream initial HTML while keeping interactive controls client-side.

## Plan

- [ ] Split header, statements, and table components into server shells with client controllers for mutations.
- [ ] Introduce Suspense/HydrationBoundary wrappers in `IdentityTab` for staged hydration.
- [ ] Replace React Query hydration with direct props for read-only data paths.
- [ ] Resolve `ProfileActivityLogType` fallback by removing `assertUnreachable` and providing a default renderer.
- [ ] Add regression tests validating streamed HTML for above-the-fold content and pagination handoff.

## Acceptance

- [ ] Identity tab ships server-rendered HTML for header, statements, and first-page tables.
- [ ] No runtime errors when new activity log types appear; default renderer verified.
- [ ] Bundle analysis confirms no regressions in client JS size; tests cover server/client boundaries.

## Links

- Primary PR: _(add when available)_
- Follow-ups: TKT-0013
- Related: TKT-0011

## Log

- 2025-10-15T00:06:00Z â€“ Ticket created for Phase 2 server-shell implementation.
