---
created: 2025-10-15
id: TKT-0009
owner: simo6529
priority: P1
status: In-Progress
title: Refactor Brain notifications shell for modular clarity
---

## Context

> The `components/brain/notifications/Notifications.tsx` component currently mixes data fetching, auth handling, scroll orchestration, and UI state rendering in one file, making it difficult to maintain and reuse. We need to break it into focused pieces without changing behaviour, visuals, or types.

## Plan

- [x] Document proposed subcomponents, hooks, and utilities for the Notifications feature.
- [x] Extract data/side-effect orchestration into a dedicated Notifications hook layer.
- [x] Extract presentational state rendering into focused subcomponents.
- [x] Rebuild the main Notifications shell to compose the new modules with unchanged API.
- [ ] Run type-check and lint to confirm no regressions. _(Blocked by existing repository failures; see log.)_

## Acceptance

- [ ] `components/brain/notifications/index.tsx` acts as the main shell and wires data/hooks → subcomponents.
- [ ] New hooks/subcomponents/utilities live under `components/brain/notifications/{hooks,subcomponents,utils}` and keep runtime behaviour identical.
- [ ] Existing imports of `Notifications` continue to work via stable exports.
- [ ] `npm run type-check` and `npm run lint` succeed after the refactor.

## Links

- Primary PR: [#1545](https://github.com/6529-Collections/6529seize-frontend/pull/1545)
- Follow-ups: _(reference additional tickets or TODO items)_

## Log

- 2025-10-15T08:34:17Z – Created ticket and drafted refactor plan.
- 2025-10-15T08:35:49Z – Outlined modular breakdown: main shell in `index.tsx`, hook layer (`useNotificationsController`, `useNotificationsScroll`), presentational states (`NotificationsContent`, `NotificationsStateMessage`), and error utilities.
- 2025-10-15T09:44:55Z – Refactored Notifications into modular files, attempted type-check/lint (failing due to pre-existing repository issues).
- 2025-10-15T10:56:58Z – Hardened mark-all-as-read success handler against context cleanup failures.
- 2025-10-16T07:48:38Z – Removed unicode regex flag from `OpenGraphPreview` to restore compatibility with current TS target; type-check attempt still blocked by existing test typing failures.
