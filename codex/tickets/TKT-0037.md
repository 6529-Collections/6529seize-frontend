---
created: 2025-12-17
id: TKT-0037
owner: openai-assistant
priority: P1
status: Review
title: Filter extensionServiceWorker Sentry noise on /waves
---

## Context

> Sentry issue `7073335494` reports `TypeError: Cannot read properties of undefined (reading 'ton')` with stack frames pointing at `app:///extensionServiceWorker.js`. This appears to be browser-extension service worker noise (e.g. wallet/extension messaging) rather than application code. We should filter these events client-side in Sentry `beforeSend` so production error signal remains actionable.

## Plan

- [x] Add a targeted `beforeSend` filter for `extensionServiceWorker.js` stacks/frames.
- [x] Add unit coverage for the filename/stack filtering helper.
- [ ] Run `npm run test` and `npm run lint`.
- [ ] Verify in production Sentry that issue volume drops.

## Acceptance

- [ ] Sentry drops events whose stack includes `app:///extensionServiceWorker.js`.
- [ ] No app-originating errors are filtered unintentionally.
- [ ] `npm run test` and `npm run lint` pass locally.

## Links

- Primary PR: _(add when available)_
- Follow-ups: _(reference additional tickets or TODO items)_

## Log

- 2025-12-17T00:00:00Z â€“ Added a targeted client-side Sentry filter for `extensionServiceWorker.js` and unit tests for the helper.
