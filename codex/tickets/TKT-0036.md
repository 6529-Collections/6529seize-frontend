---
created: 2025-10-29
id: TKT-0036
owner: openai-assistant
priority: P1
status: In-Progress
title: Improve wave media image optimisation
---

## Context

> Drop media rendering was still heavily reliant on raw `<img>` tags, leading to inconsistent optimisation, noisy GIF previews, and duplicated animation code. We need a coordinated clean-up so shared helpers handle optimisation reliably while keeping Markdown/IPFS images stable.

## Plan

- [x] Refine `FallbackImage` to centralise optimisation toggles and fail over gracefully for gifs/IPFS.
- [x] Update media display components to opt into shared scaling helpers and remove redundant inline CSS animations.
- [ ] Document remaining lint/test follow-ups and run the standard quality checks once warnings are addressed.

## Acceptance

- [ ] Wave media components request consistent CDN scales (`AUTOx450`/`AUTOx600`) without regressing alignment.
- [ ] Markdown/IPFS images still render without optimisation errors.
- [ ] Tailwind animation tokens replace inline keyframes for artist preview loaders.
- [ ] `npm run lint` and targeted media display tests pass locally.

## Links

- Primary PR: _(add when available)_
- Follow-ups: _(capture any residual lint fixes if needed)_

## Log

- 2025-10-29T15:20:00Z – Created ticket to track the image optimisation clean-up across wave components.
- 2025-10-29T15:45:00Z – Wrapped `FallbackImage` around shared media previews, added AVIF/WebP gating, and introduced the `AUTOx600` scale.
- 2025-10-29T16:05:00Z – Replaced inline loader keyframes with Tailwind animation tokens and aligned gallery/list `imageScale` usage.
- 2025-10-29T16:25:00Z – Synced environment defaults to `ipfs.6529.io`, restored safe scroll bounds in artist preview modals, and logged remaining lint follow-ups.
- 2025-11-04T10:20:00Z – Set explicit width/height on XTDH collection summary fallback images to satisfy Next.js `<Image>` requirements.
